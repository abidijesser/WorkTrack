import{r as o,x as g,u as w,j as e,C as y,a as b,b as N,c as R,d as S,e as E,A as p,f as h,i as P,B as k}from"./index-CQ1W4Bc8.js";import{C as q}from"./CCardGroup-8QRYX8-d.js";const F=()=>{const[t,x]=o.useState(""),[n,C]=o.useState(""),[i,r]=o.useState(""),[c,d]=o.useState(""),{token:j}=g(),v=w(),f=async a=>{var l,u,m;if(a.preventDefault(),t!==n){r("Les mots de passe ne correspondent pas");return}if(t.length<6){r("Le mot de passe doit contenir au moins 6 caractères");return}try{console.log("Envoi de la requête de réinitialisation...");const s=await k.post("https://worktrack-server-muu6.onrender.com/api/auth/reset-password",{token:j,newPassword:t});console.log("Réponse reçue:",s.data),s.data.success?(d("Mot de passe réinitialisé avec succès. Redirection vers la page de connexion..."),r(""),setTimeout(()=>{v("/login")},3e3)):r(s.data.error||"Erreur lors de la réinitialisation du mot de passe")}catch(s){console.error("Erreur détaillée:",(l=s.response)==null?void 0:l.data),r(((m=(u=s.response)==null?void 0:u.data)==null?void 0:m.error)||"Une erreur est survenue lors de la réinitialisation"),d("")}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(y,{children:e.jsx(b,{className:"justify-content-center",children:e.jsx(N,{md:6,children:e.jsx(q,{children:e.jsx(R,{className:"p-4",children:e.jsx(S,{children:e.jsxs(E,{onSubmit:f,children:[e.jsx("h1",{children:"Réinitialiser le mot de passe"}),i&&e.jsx(p,{color:"danger",children:i}),c&&e.jsx(p,{color:"success",children:c}),e.jsx("div",{className:"mb-3",children:e.jsx(h,{type:"password",placeholder:"Nouveau mot de passe",value:t,onChange:a=>x(a.target.value),required:!0})}),e.jsx("div",{className:"mb-3",children:e.jsx(h,{type:"password",placeholder:"Confirmer le mot de passe",value:n,onChange:a=>C(a.target.value),required:!0})}),e.jsx(P,{color:"primary",type:"submit",children:"Réinitialiser le mot de passe"})]})})})})})})})})};export{F as default};
